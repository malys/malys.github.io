= Déplacement du disque virtuel disk.vmdk de Docker
:published_at: 2016-03-09
:hp-tags: docker,Windows


== Objectif


Sous Windows, docker (ex: Boot2Docker ) installe le disque virtuel sous __%USERPROFILE%/.docker__.

Il arrive parfois que le lecteur  __C:__ soit saturé.

Il se pose alors la question de déplacer le disque virtuel `disk.vmdk` vers un autre lecteur.

== Solution

Nous devons suivre les étapes suivantes:

* Arrêter docker

[source,bash]
docker-machine stop default

Dans Virtual Box,il faut s'assurer que la VM `default` est bien arrêtée.

* Copier `disk.vmdk`

Dans VirtualBox, __CTRL+D__ pour ouvrir le gestionnaire des médias.

image:moveBoot2Docker0002.png[img]

Clic droit pour copier le disque vers son nouvel emplacement.

image:moveBoot2Docker0001.png[img]

Clic droit pour `libérer` le disque virtuel.

* Configurer la VM `default`

Dans `Stockage`, supprimer le contrôleur SATA associé à  `disk.vmdk` et ajouter un nouveau contrôleur sur le *même port SATA* pointant sur le disque virtuel déplacé.

image:moveBoot2Docker0003.png[img]

* Démarrer docker

[source,bash]
docker-machine start default

* Valider le bon fonctionnement de docker

* Supprimer l'ancien disque virtuel

Dans VirtualBox, __CTRL+D__ pour ouvrir le gestionnaire des médias.

Clic droit sur le disque pour le supprimer.

== Ressources
http://stackoverflow.com/questions/33392133/move-boot2docker-and-docker-folder-in-other-drive[Stackoverflow]



